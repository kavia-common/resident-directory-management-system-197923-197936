{"is_source_file": true, "format": "Python", "description": "This file provides authentication dependencies for FastAPI, including functions to retrieve the current authenticated user and to ensure the user has admin privileges. It utilizes token decoding, user lookup, and role validation.", "external_files": ["src.api.core.security", "src.api.db.session", "src.api.models.user"], "external_methods": ["decode_token", "get_db", "User", "UserRole"], "published": ["get_current_user", "require_admin"], "classes": [{"name": "User", "description": "Represents a user record in the database, including user details and roles."}, {"name": "UserRole", "description": "Enumeration for user roles, e.g., admin, user."}], "methods": [{"name": "User get_current_user( credentials: Annotated[HTTPAuthorizationCredentials | None, Depends(_bearer)], db: Annotated[Session, Depends(get_db)], )", "description": "Retrieves and verifies the current user based on the provided access token, raising HTTP exceptions if validation fails.", "scope": "", "scopeKind": ""}, {"name": "User require_admin(current_user: Annotated[User, Depends(get_current_user)])", "description": "Checks if the current user has admin privileges; raises exception if not.", "scope": "", "scopeKind": ""}], "calls": ["decode_token", "uuid.UUID", "db.get", "HTTPException"], "search-terms": ["auth dependency", "FastAPI auth", "token validation", "get_current_user", "require_admin", "HTTPBearer"], "state": 2, "file_id": 13, "knowledge_revision": 37, "git_revision": "faaaf9788eabe53a745ecabefd2fa21cff48c685", "ctags": [{"_type": "tag", "name": "_bearer", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-197923-197936/api_backend/src/api/deps/auth.py", "pattern": "/^_bearer = HTTPBearer(auto_error=False)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_current_user", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-197923-197936/api_backend/src/api/deps/auth.py", "pattern": "/^def get_current_user($/", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "( credentials: Annotated[HTTPAuthorizationCredentials | None, Depends(_bearer)], db: Annotated[Session, Depends(get_db)], )"}, {"_type": "tag", "name": "require_admin", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-197923-197936/api_backend/src/api/deps/auth.py", "pattern": "/^def require_admin(current_user: Annotated[User, Depends(get_current_user)]) -> User:$/", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "(current_user: Annotated[User, Depends(get_current_user)])"}], "hash": "4c367f40413f860de230d29608611271", "format-version": 4, "code-base-name": "api_backend", "filename": "api_backend/src/api/deps/auth.py", "fields": [{"name": "_bearer = HTTPBearer(auto_error=False)", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"37": "faaaf9788eabe53a745ecabefd2fa21cff48c685"}]}