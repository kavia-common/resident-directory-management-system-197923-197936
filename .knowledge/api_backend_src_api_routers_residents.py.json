{"is_source_file": true, "format": "Python", "description": "This file defines API routes for managing residents, including listing, fetching by ID, creating, updating, and deleting resident records using FastAPI, SQLAlchemy ORM, and related dependencies.", "external_files": ["src.api.db.session", "src.api.deps.auth", "src.api.models.resident", "src.api.models.user", "src.api.schemas.resident"], "external_methods": ["get_db", "get_current_user", "require_admin"], "published": ["list_residents", "get_resident", "create_resident", "update_resident", "delete_resident"], "classes": [], "methods": [{"name": "ResidentOut _to_out(r: Resident)", "description": "Converts a Resident ORM object to a ResidentOut schema for API responses.", "scope": "", "scopeKind": ""}, {"name": "ResidentListResponse list_residents( db: Annotated[Session, Depends(get_db)], _user: Annotated[User, Depends(get_current_user)], q: Optional[str] = Query(None, description=\"Search query matched against name/address/phone/email/city/state/zip.\"), page: int = Query(1, ge=1, description=\"Page number (1-based).\"), page_size: int = Query(20, ge=1, le=100, description=\"Page size (max 100).\"), sort_by: Literal[\"last_name\", \"first_name\", \"created_at\", \"updated_at\", \"city\"] = Query( \"last_name\", description=\"Sort field.\" ), sort_dir: Literal[\"asc\", \"desc\"] = Query(\"asc\", description=\"Sort direction.\"), )", "description": "Handles GET requests to list/search residents with pagination and sorting.", "scope": "", "scopeKind": ""}, {"name": "ResidentOut get_resident( resident_id: UUID, db: Annotated[Session, Depends(get_db)], _user: Annotated[User, Depends(get_current_user)], )", "description": "Fetches a single resident by UUID.", "scope": "", "scopeKind": ""}, {"name": "ResidentOut create_resident( payload: ResidentCreate, db: Annotated[Session, Depends(get_db)], _admin: Annotated[User, Depends(require_admin)], )", "description": "Creates a new resident record; admin-only endpoint.", "scope": "", "scopeKind": ""}, {"name": "ResidentOut update_resident( resident_id: UUID, payload: ResidentUpdate, db: Annotated[Session, Depends(get_db)], _admin: Annotated[User, Depends(require_admin)], )", "description": "Updates an existing resident record; admin-only endpoint.", "scope": "", "scopeKind": ""}, {"name": "None delete_resident( resident_id: UUID, db: Annotated[Session, Depends(get_db)], _admin: Annotated[User, Depends(require_admin)], )", "description": "Deletes a resident record by UUID; admin-only endpoint.", "scope": "", "scopeKind": ""}], "calls": ["get_db", "get_current_user", "require_admin", "db.get", "db.add", "db.commit", "db.refresh", "db.delete", "db.execute", "db.scalars"], "search-terms": ["resident management API", "residents endpoint", "ResidentOut schema", "resident UUID", "ResidentCreate", "ResidentUpdate", "search residents", "pagination", "sorting residents"], "state": 2, "file_id": 15, "knowledge_revision": 39, "git_revision": "faaaf9788eabe53a745ecabefd2fa21cff48c685", "ctags": [{"_type": "tag", "name": "_to_out", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-197923-197936/api_backend/src/api/routers/residents.py", "pattern": "/^def _to_out(r: Resident) -> ResidentOut:$/", "language": "Python", "typeref": "typename:ResidentOut", "kind": "function", "signature": "(r: Resident)"}, {"_type": "tag", "name": "create_resident", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-197923-197936/api_backend/src/api/routers/residents.py", "pattern": "/^def create_resident($/", "language": "Python", "typeref": "typename:ResidentOut", "kind": "function", "signature": "( payload: ResidentCreate, db: Annotated[Session, Depends(get_db)], _admin: Annotated[User, Depends(require_admin)], )"}, {"_type": "tag", "name": "delete_resident", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-197923-197936/api_backend/src/api/routers/residents.py", "pattern": "/^def delete_resident($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( resident_id: UUID, db: Annotated[Session, Depends(get_db)], _admin: Annotated[User, Depends(require_admin)], )"}, {"_type": "tag", "name": "get_resident", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-197923-197936/api_backend/src/api/routers/residents.py", "pattern": "/^def get_resident($/", "language": "Python", "typeref": "typename:ResidentOut", "kind": "function", "signature": "( resident_id: UUID, db: Annotated[Session, Depends(get_db)], _user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "list_residents", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-197923-197936/api_backend/src/api/routers/residents.py", "pattern": "/^def list_residents($/", "language": "Python", "typeref": "typename:ResidentListResponse", "kind": "function", "signature": "( db: Annotated[Session, Depends(get_db)], _user: Annotated[User, Depends(get_current_user)], q: Optional[str] = Query(None, description=\"Search query matched against name/address/phone/email/city/state/zip.\"), page: int = Query(1, ge=1, description=\"Page number (1-based).\"), page_size: int = Query(20, ge=1, le=100, description=\"Page size (max 100).\"), sort_by: Literal[\"last_name\", \"first_name\", \"created_at\", \"updated_at\", \"city\"] = Query( \"last_name\", description=\"Sort field.\" ), sort_dir: Literal[\"asc\", \"desc\"] = Query(\"asc\", description=\"Sort direction.\"), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-197923-197936/api_backend/src/api/routers/residents.py", "pattern": "/^router = APIRouter(prefix=\"\\/residents\", tags=[\"residents\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_resident", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-197923-197936/api_backend/src/api/routers/residents.py", "pattern": "/^def update_resident($/", "language": "Python", "typeref": "typename:ResidentOut", "kind": "function", "signature": "( resident_id: UUID, payload: ResidentUpdate, db: Annotated[Session, Depends(get_db)], _admin: Annotated[User, Depends(require_admin)], )"}], "hash": "2923754efc04a4079c2bd7cbec90ec9d", "format-version": 4, "code-base-name": "api_backend", "filename": "api_backend/src/api/routers/residents.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/residents\", tags=[\"residents\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"39": "faaaf9788eabe53a745ecabefd2fa21cff48c685"}]}